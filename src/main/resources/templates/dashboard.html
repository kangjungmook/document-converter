<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ€ì‹œë³´ë“œ - Convertio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }

        .stat-card:hover {
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="bg-gray-50">
<header class="bg-white border-b border-gray-200 px-8 py-4">
    <div class="max-w-7xl mx-auto flex items-center justify-between">
        <a href="/" class="flex items-center gap-3">
            <div class="w-8 h-8 bg-gradient-to-br from-purple-600 to-purple-800 rounded-lg flex items-center justify-center text-white">
                ğŸ“„
            </div>
            <span class="text-2xl font-bold">Convertio</span>
        </a>
        <div class="flex items-center gap-6">
            <span id="userName" class="text-gray-700"></span>
            <button onclick="logout()" class="text-gray-600 hover:text-purple-600">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
    </div>
</header>

<main class="max-w-7xl mx-auto px-8 py-12">
    <!-- ì‚¬ìš©ì ì •ë³´ -->
    <div class="bg-gradient-to-r from-purple-600 to-purple-800 rounded-2xl p-8 text-white mb-8">
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-3xl font-bold mb-2">ëŒ€ì‹œë³´ë“œ</h1>
                <p class="text-purple-200" id="welcomeText">í™˜ì˜í•©ë‹ˆë‹¤!</p>
            </div>
            <div class="text-right">
                <span class="badge bg-white text-purple-700 px-4 py-2 rounded-full font-bold" id="userRole">FREE</span>
                <p class="text-sm text-purple-200 mt-2">ë¬´ë£Œ í”Œëœ</p>
            </div>
        </div>
    </div>

    <!-- í†µê³„ ì¹´ë“œ -->
    <div class="grid md:grid-cols-4 gap-6 mb-8">
        <div class="stat-card">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl">ğŸ“Š</span>
                <span class="text-2xl font-bold text-purple-600" id="todayUsage">0</span>
            </div>
            <h3 class="font-semibold text-gray-800">ì˜¤ëŠ˜ ì‚¬ìš©ëŸ‰</h3>
            <p class="text-sm text-gray-500">FREE: í•˜ë£¨ 10íšŒ</p>
        </div>

        <div class="stat-card">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl">ğŸ“…</span>
                <span class="text-2xl font-bold text-blue-600" id="monthlyUsage">0</span>
            </div>
            <h3 class="font-semibold text-gray-800">ì´ë²ˆ ë‹¬ ì‚¬ìš©ëŸ‰</h3>
            <p class="text-sm text-gray-500">ëˆ„ì  ë³€í™˜ íšŸìˆ˜</p>
        </div>

        <div class="stat-card">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl">ğŸ”‘</span>
                <span class="text-2xl font-bold text-green-600">API</span>
            </div>
            <h3 class="font-semibold text-gray-800">API í‚¤</h3>
            <p class="text-sm text-gray-500">Pro ì´ìƒ ì‚¬ìš© ê°€ëŠ¥</p>
        </div>

        <div class="stat-card">
            <div class="flex items-center justify-between mb-4">
                <span class="text-3xl">ğŸ’</span>
                <span class="text-2xl font-bold text-orange-600">UP</span>
            </div>
            <h3 class="font-semibold text-gray-800">í”Œëœ ì—…ê·¸ë ˆì´ë“œ</h3>
            <p class="text-sm text-gray-500">ë¬´ì œí•œìœ¼ë¡œ!</p>
        </div>
    </div>

    <!-- API í‚¤ ì„¹ì…˜ -->
    <div class="bg-white rounded-2xl p-8 mb-8 shadow-sm" id="apiKeySection">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ”‘ API í‚¤</h2>
        <div id="apiKeyContent">
            <p class="text-gray-600">Pro í”Œëœìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ë©´ APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <a href="/pricing" class="inline-block mt-4 bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700">
                í”Œëœ ì—…ê·¸ë ˆì´ë“œ
            </a>
        </div>
    </div>

    <!-- ë¹ ë¥¸ ì‹¤í–‰ -->
    <div class="bg-white rounded-2xl p-8 shadow-sm">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">ğŸš€ ë¹ ë¥¸ ì‹¤í–‰</h2>

        <div class="grid md:grid-cols-3 gap-4">
            <a href="/pdf/merge" class="p-6 border-2 border-gray-200 rounded-xl hover:border-purple-500 transition">
                <div class="text-4xl mb-3">ğŸ“‘</div>
                <h3 class="font-bold text-gray-800 mb-2">PDF ë³‘í•©</h3>
                <p class="text-sm text-gray-600">ì—¬ëŸ¬ PDFë¥¼ í•˜ë‚˜ë¡œ</p>
            </a>

            <a href="/pdf/split" class="p-6 border-2 border-gray-200 rounded-xl hover:border-purple-500 transition">
                <div class="text-4xl mb-3">âœ‚ï¸</div>
                <h3 class="font-bold text-gray-800 mb-2">PDF ë¶„í• </h3>
                <p class="text-sm text-gray-600">í˜ì´ì§€ë³„ ë¶„í• </p>
            </a>

            <a href="/image/resize" class="p-6 border-2 border-gray-200 rounded-xl hover:border-purple-500 transition">
                <div class="text-4xl mb-3">ğŸ–¼ï¸</div>
                <h3 class="font-bold text-gray-800 mb-2">ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ</h3>
                <p class="text-sm text-gray-600">í¬ê¸° ì¡°ì ˆ</p>
            </a>
        </div>
    </div>
</main>

<script>
    // ë¡œê·¸ì¸ í™•ì¸
    const user = JSON.parse(localStorage.getItem('user') || 'null');

    if (!user) {
        alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
        window.location.href = '/login';
    } else {
        // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
        document.getElementById('userName').textContent = user.name + 'ë‹˜';
        document.getElementById('welcomeText').textContent = `í™˜ì˜í•©ë‹ˆë‹¤, ${user.name}ë‹˜!`;
        document.getElementById('userRole').textContent = user.role;
        document.getElementById('todayUsage').textContent = user.dailyUsage || 0;
        document.getElementById('monthlyUsage').textContent = user.monthlyUsage || 0;

        // PRO/ENTERPRISE ì‚¬ìš©ìë©´ API í‚¤ í‘œì‹œ
        if (user.role === 'PRO' || user.role === 'ENTERPRISE') {
            document.getElementById('apiKeyContent').innerHTML = `
                    <div class="bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg p-4 mb-4">
                        <code class="text-sm text-gray-800">${user.apiKey}</code>
                    </div>
                    <button onclick="copyApiKey()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700">
                        ğŸ“‹ ë³µì‚¬
                    </button>
                `;
        }
    }

    function copyApiKey() {
        const apiKey = user.apiKey;
        navigator.clipboard.writeText(apiKey);
        alert('âœ… API í‚¤ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
    }

    function logout() {
        localStorage.removeItem('user');
        alert('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.');
        window.location.href = '/';
    }
</script>
</body>
</html>